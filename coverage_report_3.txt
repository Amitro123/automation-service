============================= test session starts =============================
platform win32 -- Python 3.11.9, pytest-9.0.0, pluggy-1.6.0 -- C:\Users\USER\AppData\Local\Microsoft\WindowsApps\PythonSoftwareFoundation.Python.3.11_qbz5n2kfra8p0\python.exe
cachedir: .pytest_cache
rootdir: C:\Users\USER\AutomationService\automation-service
configfile: pytest.ini
plugins: anyio-4.11.0, logfire-4.14.2, asyncio-1.3.0, cov-7.0.0
asyncio: mode=Mode.AUTO, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 66 items

tests/test_code_reviewer.py::test_review_commit_success PASSED           [  1%]
tests/test_code_reviewer.py::test_review_commit_no_diff PASSED           [  3%]
tests/test_code_reviewer.py::test_review_commit_llm_failure PASSED       [  4%]
tests/test_code_reviewer.py::test_review_commit_post_as_issue PASSED     [  6%]
tests/test_config.py::TestConfig::test_get_repo_full_name PASSED         [  7%]
tests/test_config.py::TestConfig::test_validate_failure PASSED           [  9%]
tests/test_config.py::TestConfig::test_validate_success PASSED           [ 10%]
tests/test_github_client.py::test_get_commit_diff_success PASSED         [ 12%]
tests/test_github_client.py::test_get_commit_diff_failure PASSED         [ 13%]
tests/test_github_client.py::test_get_commit_info_success PASSED         [ 15%]
tests/test_github_client.py::test_get_commit_info_failure PASSED         [ 16%]
tests/test_github_client.py::test_post_commit_comment_success PASSED     [ 18%]
tests/test_github_client.py::test_post_commit_comment_failure PASSED     [ 19%]
tests/test_github_client.py::test_create_issue_success PASSED            [ 21%]
tests/test_github_client.py::test_create_issue_failure PASSED            [ 22%]
tests/test_github_client.py::test_get_file_content_success PASSED        [ 24%]
tests/test_github_client.py::test_get_file_content_404 PASSED            [ 25%]
tests/test_github_client.py::test_get_file_content_failure PASSED        [ 27%]
tests/test_github_client.py::test_update_file_success PASSED             [ 28%]
tests/test_github_client.py::test_update_file_existing PASSED            [ 30%]
tests/test_github_client.py::test_update_file_failure PASSED             [ 31%]
tests/test_github_client.py::test_create_branch_success PASSED           [ 33%]
tests/test_github_client.py::test_create_branch_failure PASSED           [ 34%]
tests/test_github_client.py::test_create_pull_request_success PASSED     [ 36%]
tests/test_github_client.py::test_create_pull_request_failure PASSED     [ 37%]
tests/test_github_client.py::test_get_recent_commits_success PASSED      [ 39%]
tests/test_github_client.py::test_get_recent_commits_failure PASSED      [ 40%]
tests/test_llm_client.py::test_init_openai_success PASSED                [ 42%]
tests/test_llm_client.py::test_init_anthropic_success PASSED             [ 43%]
tests/test_llm_client.py::test_init_invalid_provider PASSED              [ 45%]
tests/test_llm_client.py::test_init_missing_api_key PASSED               [ 46%]
tests/test_llm_client.py::test_generate_openai PASSED                    [ 48%]
tests/test_llm_client.py::test_generate_anthropic PASSED                 [ 50%]
tests/test_llm_client.py::test_generate_failure PASSED                   [ 51%]
tests/test_llm_client.py::test_analyze_code PASSED                       [ 53%]
tests/test_llm_client.py::test_analyze_code_truncated PASSED             [ 54%]
tests/test_llm_client.py::test_update_readme PASSED                      [ 56%]
tests/test_llm_client.py::test_update_spec PASSED                        [ 57%]
tests/test_orchestrator.py::test_run_automation_success PASSED           [ 59%]
tests/test_orchestrator.py::test_run_automation_invalid_payload PASSED   [ 60%]
tests/test_orchestrator.py::test_extract_diff_info_valid PASSED          [ 62%]
tests/test_orchestrator.py::test_extract_diff_info_invalid PASSED        [ 63%]
tests/test_orchestrator.py::test_run_parallel_tasks_success PASSED       [ 65%]
tests/test_orchestrator.py::test_run_parallel_tasks_exception PASSED     [ 66%]
tests/test_orchestrator.py::test_code_review_failure PASSED              [ 68%]
tests/test_orchestrator.py::test_readme_update_skipped PASSED            [ 69%]
tests/test_orchestrator.py::test_create_documentation_pr_failure_branch PASSED [ 71%]
tests/test_orchestrator.py::test_create_documentation_pr_failure_update_readme PASSED [ 72%]
tests/test_orchestrator.py::test_create_documentation_pr_failure_update_spec PASSED [ 74%]
tests/test_orchestrator.py::test_create_documentation_pr_failure_create_pr PASSED [ 75%]
tests/test_orchestrator.py::test_create_documentation_pr_exception PASSED [ 77%]
tests/test_orchestrator.py::test_readme_update_exception PASSED          [ 78%]
tests/test_orchestrator.py::test_spec_update_exception PASSED            [ 80%]
tests/test_orchestrator.py::test_spec_update_failed PASSED               [ 81%]
tests/test_readme_updater.py::test_update_readme_success PASSED          [ 83%]
tests/test_readme_updater.py::test_update_readme_no_changes PASSED       [ 84%]
tests/test_readme_updater.py::test_update_readme_failure PASSED          [ 86%]
tests/test_spec_updater.py::test_update_spec_success PASSED              [ 87%]
tests/test_spec_updater.py::test_update_spec_failure PASSED              [ 89%]
tests/test_spec_updater.py::test_update_spec_no_commit_info PASSED       [ 90%]
tests/test_spec_updater.py::test_update_spec_create_new PASSED           [ 92%]
tests/test_spec_updater.py::test_update_spec_llm_returns_empty PASSED    [ 93%]
tests/test_webhook_server.py::TestWebhookServer::test_health_check PASSED [ 95%]
tests/test_webhook_server.py::TestWebhookServer::test_webhook_invalid_signature PASSED [ 96%]
tests/test_webhook_server.py::TestWebhookServer::test_webhook_push_event PASSED [ 98%]
tests/test_webhook_server.py::TestWebhookServer::test_webhook_valid_signature_ping PASSED [100%]

=============================== tests coverage ================================
_______________ coverage: platform win32, python 3.11.9-final-0 _______________

Name                                     Stmts   Miss  Cover   Missing
----------------------------------------------------------------------
src\automation_agent\__init__.py             0      0   100%
src\automation_agent\code_reviewer.py       36      4    89%   45-46, 52-53
src\automation_agent\config.py              40      4    90%   52, 54, 59, 61
src\automation_agent\github_client.py      132      2    98%   171-172
src\automation_agent\llm_client.py          74      9    88%   49, 57, 62-63, 84, 110-112, 154
src\automation_agent\main.py                31     31     0%   4-51
src\automation_agent\orchestrator.py       105     15    86%   98, 105-107, 134-136, 161-175, 217-231
src\automation_agent\readme_updater.py      41      6    85%   40-41, 45-46, 51-52
src\automation_agent\spec_updater.py        37      0   100%
src\automation_agent\webhook_server.py      75     12    84%   105-106, 112-113, 142-143, 154-161, 165-166
----------------------------------------------------------------------
TOTAL                                      571     83    85%
============================= 66 passed in 2.37s ==============================
